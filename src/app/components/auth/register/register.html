<section class="auth-card">
  <h2>Crear cuenta</h2>

  <!-- üîÑ Banner de espera de verificaci√≥n -->
  <div class="waiting-verification" *ngIf="waitingForVerification() && !loading()" role="status">
    <div class="spinner-small"></div>
    <div class="waiting-content">
      <strong>Esperando verificaci√≥n de email...</strong>
      <p>Hemos enviado un email a tu direcci√≥n. Haz clic en el enlace para verificar tu cuenta y acceder autom√°ticamente.</p>
    </div>
  </div>

  <!-- ‚úÖ Banner de √©xito de registro -->
  <div class="success-message" *ngIf="registrationSuccess() && needsEmailVerification()" role="alert">
    <div class="success-icon">‚úì</div>
    <div class="success-content">
      <strong>¬°Cuenta creada exitosamente!</strong>
      <p>Por favor, verifica tu email para continuar.</p>
    </div>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="form">
    <label class="label">
      <span>Email</span>
      <input class="input" type="email" formControlName="email" autocomplete="username" />
    </label>
    <label class="label">
      <span>Usuario (opcional)</span>
      <input class="input" type="text" formControlName="username" />
    </label>
    <label class="label">
      <span>Contrase√±a</span>
      <input class="input" type="password" formControlName="password" autocomplete="new-password" />
    </label>

    <div class="actions">
      <button class="btn btn-primary" type="submit" [disabled]="loading()">
        {{ loading() ? 'Registrando...' : 'Registrarme' }}
      </button>
    </div>

    <div class="error" *ngIf="error() && !needsEmailVerification()">{{ error() }}</div>
  </form>
</section>